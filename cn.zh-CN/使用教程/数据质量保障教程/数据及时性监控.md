# 数据及时性监控 {#task_977418 .task}

基于MaxCompute的离线任务会对数据产出有时间要求，在确保数据准确性的前提下，您需要进一步让数据能够及时提供服务。本教程为您演示如何使用DataWorks智能监控功能完成数据及时性的监控。

本教程为您演示基础版DataWorks的基本智能监控功能：规则管理。如果您想使用完整的智能监控功能，需至少购买标准版DataWorks，详情请参见[DataWorks增值版本功能对比](../../../../cn.zh-CN/产品定价/附录/DataWorks增值版本功能对比.md#)。关于DataWorks智能监控功能详情请参见[智能监控概述](../../../../cn.zh-CN/使用指南/运维中心/智能监控/智能监控概述.md#)。

在对数据产出及时性监控前，您需要首先确定调度任务的优先级。数据资产等级越高的任务节点，优先级越高，您可以给予更加严格的数据及时性监控和告警规则。

1.  进入**规则管理**页面。 在DataStudio页面单击**运维中心（工作流）**。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/789009/156257861150966_zh-CN.png)

    单击**智能监控** \> **规则管理**。关于**规则管理**的详情请参见[规则管理](../../../../cn.zh-CN/使用指南/运维中心/智能监控/使用指导/规则管理.md#)。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/789009/156257861250967_zh-CN.png)

2.  新建自定义规则。 单击**新建自定义规则**，输入参数后单击**确定**即可，如下图所示。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/789009/156257861250968_zh-CN.png)

    在本例中，监控整个业务流程每次运行时间不可超过30分钟。如果运行时间超过30分钟，即开始每30分钟产生告警1次，连续告警3次，告警方式为邮件及短信。对于重要的任务节点，您还可以单独设置任务节点规则，并定义其他**触发条件**如下图所示。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/789009/156257861250998_zh-CN.png)

3.  数据及时性优化。 通常，影响数据按时产出的主要原因有：

    -   计算资源不足：
        -   资源总量不足。例如，资源上限为500，但您提交了需要1000资源的任务。
        -   资源分配不合理，重要任务未优先分配资源。
    -   代码执行效率低：
        -   代码冗余，例如扫描所有分区。
        -   节点任务配置不合理，例如出现长尾问题。
    -   缺少问题紧急预案，运维人员无法应对。
    面对上述问题，您可以考虑从以下方面优化，提升数据及时性：

    -   扩容计算资源，或让您的核心计算任务独占资源。
    -   分级错峰：高峰时段让低优先级任务延迟启动。
    -   在任务正式运行前，进行充分的压力测试。

