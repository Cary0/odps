# 查看账单详情 {#concept_rhv_f2d_5db .concept}

本文为您介绍如何查看指定项目的MaxCompute账单详情。

## 消费明细 {#section_yv1_m2d_5db .section}

MaxCompute以天为单位生成账单。您可以登录阿里云控制台，单击顶部导航栏中的**费用**，定位到[费用账单](https://usercenter2.aliyun.com/finance/expense-report/overview)查看每天的账单信息。您也可以通过[三分钟教你学会分析MaxCompute消费明细](https://yq.aliyun.com/articles/253504)学习如何分析MaxCompute消费明细。

在消费明细页面中，根据您的MaxCompute计算任务的计费模式，您可以选择以下产品：

-   产品为**大数据计算服务MaxCompute（按量付费）**是指后付费模式。
-   产品为**大数据计算服务MaxCompute（包月）**是指预付费模式。

**说明：** 通常您需要使用主账号查看账单详情。如果您需要使用子账号查看账单信息，请参见[费用中心RAM策略介绍](https://help.aliyun.com/document_detail/88883.html)进行子账号授权。

您可以根据产品分类MaxCompute及时间筛选要查看的消费金额。

![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/11938/156393406052596_zh-CN.jpg)

**说明：** **后付费**是指项目开通包月计算计费模式后，还产生的存储、下载对应的费用（存储、下载费用只有后付费）。

单击**账单明细**查看每个项目的消费情况。您还可以通过下载[使用记录](#section_cw1_m2d_5db)查看消费是如何产生的。

![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/11938/156393406052598_zh-CN.jpg)

## 使用记录 {#section_cw1_m2d_5db .section}

如果您希望具体了解费用是如何产生的，例如每天的存储花费、计算费用是由哪些SQL产生的、这些SQL作业是由谁提交的等信息，可以通过**导出账单CSV**下载详细的使用信息。

![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/11938/156393406152600_zh-CN.jpg)

使用记录CSV文件导出到本地后，您可以使用Excel等工具打开并查看详细记录。使用记录格式展示如下。

``` {#codeblock_958_rqm_ya5}
--csv的表头
账期，财务单元，账号ID，账号，Owner账号，产品Code，产品，产品明细Code，产品明细，消费类型，消费时间，账单开始时间，账单结束时间，服务时长，订单号/账单号，账单类型，计费方式，实例ID，实例昵称，资源组，实例标签，实例配置，实例规格，公网IP，私网IP，地域，可用区，计费项，单价，单价单位，用量，用量单位，资源包抵扣，原价，优惠金额，优惠券抵扣，应付金额，现金支付，代金券抵扣，储值卡支付金额，欠费金额
```

您可以看到每一个计算SQL的原始计量信息，以及它们的实例ID。

了解到计算的实例ID后，您可以通过MaxCompute客户端提供的`desc instance InstanceID;`命令查看这个作业的详细信息，示例如下。

``` {#codeblock_d2l_fwu_9br}
odps@ odps_test>desc instance 2016070102275442go3xxxxxx;
ID 2016070102275442go3xxxxxx
Owner ALIYUN$***@aliyun-inner.com
StartTime 2016-07-01 10:27:54 
EndTime 2016-07-01 10:28:16
Status Terminated 
console_query_task_1467340078684 Success 
Query select count(*) from src where ds='20160628';
```

**说明：** 您也可以通过计量API获取MaxCompute使用记录。计量API的使用说明请参见[阿里云交易和账单管理API](https://help.aliyun.com/product/87964.html)\>[计量域](https://help.aliyun.com/document_detail/115226.html)\>[查询产品计量记录服务](https://help.aliyun.com/document_detail/115226.html)。MaxCompute的计量表（Table）为按量付费（ODPS）或预付费（ODPSDataPlus）。

-   如果您想知道**某个SQL任务的费用**，可以在下载使用记录后，打开CSV表格。查看**计费项**中的**SQL作业计算**计费项。某项目SQL任务产生的费用计算公式为`SQL用量*SQL复杂度*SQL单价`。

    例如下图中**实例ID**为**dataworks\_demo\_xc**所产生的费用是：SQL用量（0.01GB）\*SQL复杂度（1）\*SQL单价（0.3元/GB）=0.003元

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/11938/156393406152651_zh-CN.jpg)

    如果您使用了[外部表功能](../../../../cn.zh-CN/开发/外部表/外部表概述.md#)，例如OTS、OSS外表，则上述表格中还会出现SQL读取量\_访问OTS（Byte）或SQL读取量\_访问OSS（Byte）信息。外表的计费公式如下。

    ``` {#codeblock_o2c_je6_74u}
    一次SQL计算费用=SQL用量*SQL复杂度*SQL单价
    ```

    其中外表SQL单价为0.03元/GB，SQL复杂度为1。

-   如果您想知道**费用产生的原因和存在的问题**，可复制`Log view`的URL后在浏览器打开。通过Log view可以发现全表扫描、长尾计算等问题，您可以参考[计算长尾优化](../../../../cn.zh-CN/最佳实践/计算优化/计算长尾调优.md#)进行调优。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/11938/15639340618899_zh-CN.png)

    **说明：** Log view统计的是实际参与计算的用量，SQL费用收取是按照系统压缩后的数据量进行计算。当前使用记录文件下载大小限制为10M以内，超过10M的使用记录文件下载请建立工单联系阿里云。


## 典型场景费用分析 {#section_gkx_hd4_r2b .section}

-   **分析存储收取1分钱的原因** 

    通过导出使用记录，分析部分存储收取1分钱费用的原因。

    1.  下载使用记录后，打开CSV表格。查看**计费项**中的**存储**计费项。
    2.  例如下图中**实例ID**为**workshop\_demo\_0329\_dev**所产生的存储费用为0.01元。

        ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/11938/156393406252665_zh-CN.jpg)

        这是因为当项目的数据实际存储量大于0小于等于512MB时，MaxCompute将收取这个项目0.01元的费用，详情请参见[存储计费项（按量付费）](cn.zh-CN/产品定价/存储计费项（按量付费）.md#)。

    3.  如果这份数据只用于测试，您可以通过IDE删除Project下的表数据。
-   **分析数据上传和下载是否产生了费用** 

    如果您担心数据同步会产生费用，可以通过分析账单来确认。

    1.  通过导出CSV使用记录，分析下载消耗明细。**计费项**为**公网下行流量**代表公网下载计费项。

        ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/11938/156393406252692_zh-CN.jpg)

    2.  下载优化举例

        查看您的Tunnel设置的Service，是否因为设置了公共网络产生费用，可参见[配置Endpoint](../../../../cn.zh-CN/准备工作/配置Endpoint.md#)。

        如果您本地在苏州，Region在华东2上海，则可以先通过华东2的ECS把数据下载到虚机，然后利用ECS包月下载资源。


